<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine's Proposal</title>
<style>
body {
    margin: 0;
    padding: 0;
    background: linear-gradient(to bottom right, #ffcccc, #ff99cc);
    font-family: 'Arial', sans-serif;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    height: 100vh;
    text-align: center;
    position: relative;
    touch-action: none;
}

#welcomeMessage, #countdown {
    position: absolute;
    top: 30%;
    font-size: 2em;
    color: #ff0066;
    text-shadow: 2px 2px 10px #fff;
    opacity: 0;
    animation: fadeIn 2s forwards;
    z-index: 5;
}

h1 {
    color: #ff0066;
    font-size: 3em;
    margin-bottom: 20px;
    cursor: pointer;
    text-shadow: 2px 2px 10px #fff;
    display: none;
}

img {
    width: 300px;
    border-radius: 20px;
    margin-bottom: 20px;
    box-shadow: 0px 0px 30px #ff99cc;
    display: none;
}

#proposal {
    display: none;
    font-size: 2em;
    color: #ff0066;
    margin-top: 20px;
    animation: fadeIn 2s forwards;
}

#yesBtn {
    display: none;
    padding: 15px 30px;
    font-size: 1.8em;
    color: white;
    background-color: #ff3366;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    margin-top: 20px;
}

#yesBtn:hover { background-color: #ff6699; }

#finalMessage {
    display: none;
    font-size: 2.5em;
    color: #ff0066;
    margin-top: 20px;
    text-shadow: 2px 2px 10px #fff;
    animation: fadeIn 2s forwards;
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.8);}
    to { opacity: 1; transform: scale(1);}
}

.heart {
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: #ff3366;
    transform: rotate(-45deg);
    animation: floatUp linear infinite;
    border-radius: 5px;
    pointer-events: none;
    z-index: 5;
}

.heart::before,
.heart::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: #ff3366;
    border-radius: 50%;
}

.heart::before { top: -10px; left: 0; }
.heart::after { left: 10px; top: 0; }

@keyframes floatUp {
    0% { transform: translateY(0) rotate(-45deg); opacity: 1;}
    100% { transform: translateY(-100vh) rotate(-45deg); opacity: 0;}
}

canvas { position: absolute; top: 0; left: 0; z-index: 10; pointer-events: none; }
</style>
</head>
<body>

<div id="welcomeMessage">Hey Sexy ‚ù§Ô∏è, I have a surprise for you‚Ä¶ Tap anywhere!</div>
<div id="countdown"></div>

<h1>Sexy ‚ù§Ô∏è, tap me!</h1>
<img src="https://images.unsplash.com/photo-1605902711622-cfb43c4431e0?auto=format&fit=crop&w=500&q=80" alt="Valentine's Image">
<div id="proposal">Will you be my Valentine? üíñ</div>
<button id="yesBtn" onclick="showFinal()">Yes! üíï</button>
<div id="finalMessage">I'm yours forever! üíñ</div>

<audio id="loveSong" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3" type="audio/mpeg">
    Your browser does not support audio.
</audio>

<canvas id="fireworks"></canvas>

<script>
const music = document.getElementById('loveSong');
const welcomeMessage = document.getElementById('welcomeMessage');
const countdownEl = document.getElementById('countdown');
const title = document.querySelector('h1');
const img = document.querySelector('img');

let started = false;

function startExperience() {
    if (started) return;
    started = true;

    // Play music
    music.play().catch(()=>{});

    // Hide welcome message
    welcomeMessage.style.display = 'none';

    // Start countdown
    let countdown = 3;
    countdownEl.style.display = 'block';
    countdownEl.textContent = countdown;
    const interval = setInterval(()=>{
        countdown--;
        if(countdown > 0){
            countdownEl.textContent = countdown;
        } else {
            clearInterval(interval);
            countdownEl.style.display='none';
            // Show proposal
            title.style.display = 'block';
            img.style.display = 'block';
            document.getElementById('proposal').style.display = 'block';
            document.getElementById('yesBtn').style.display = 'inline-block';
        }
    }, 1000);
}

// Floating hearts in background
function createHeart() {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.style.left = Math.random() * window.innerWidth + 'px';
    heart.style.animationDuration = 4 + Math.random() * 3 + 's';
    heart.style.width = 10 + Math.random() * 20 + 'px';
    heart.style.height = heart.style.width;
    heart.style.backgroundColor = `hsl(${Math.random()*360},70%,60%)`;
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 7000);
}
setInterval(createHeart, 300);

// Fireworks canvas
const canvas = document.getElementById('fireworks');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let fireworks = [];
let particles = [];

class Firework {
    constructor(x, y, targetY, color='') {
        this.x=x; this.y=y; this.targetY=targetY;
        this.speed=4+Math.random()*2;
        this.color = color || `hsl(${Math.random()*360},100%,50%)`;
    }
    update() {
        this.y-=this.speed;
        if(this.y<=this.targetY){
            createHeartParticles(this.x, this.y);
            return false;
        }
        return true;
    }
    draw(){ ctx.fillStyle=this.color; ctx.fillRect(this.x,this.y,2,10);}
}

class Particle {
    constructor(x,y,color,shape='circle'){
        this.x=x; this.y=y; this.color=color;
        this.speedX=(Math.random()-0.5)*6;
        this.speedY=(Math.random()-0.5)*6;
        this.alpha=1;
        this.shape = shape;
    }
    update(){ this.x+=this.speedX; this.y+=this.speedY; this.alpha-=0.02; return this.alpha>0;}
    draw(){
        ctx.globalAlpha=this.alpha;
        ctx.fillStyle=this.color;
        if(this.shape==='heart'){
            drawHeart(this.x,this.y,5,this.color);
        } else {
            ctx.fillRect(this.x,this.y,3,3);
        }
        ctx.globalAlpha=1;
    }
}

// Draw heart shape
function drawHeart(x, y, size, color){
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(-Math.PI/4);
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.fillRect(0,0,size,size);
    ctx.fillRect(-size,0,size,size);
    ctx.arc(-size/2, -size/2, size/2, 0, Math.PI*2);
    ctx.arc(size/2, -size/2, size/2, 0, Math.PI*2);
    ctx.fill();
    ctx.restore();
}

// Create heart + confetti particles
function createHeartParticles(x, y){
    for(let i=0;i<30;i++){
        let color = `hsl(${Math.random()*360},100%,70%)`;
        particles.push(new Particle(x,y,color,'heart'));
    }
    for(let i=0;i<50;i++){
        let color = `hsl(${Math.random()*360},100%,70%)`;
        particles.push(new Particle(x,y,color,'circle'));
    }
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    fireworks = fireworks.filter(f=>f.update());
    fireworks.forEach(f=>f.draw());
    particles = particles.filter(p=>p.update());
    particles.forEach(p=>p.draw());
    requestAnimationFrame(animate);
}
animate();

function showFinal(){
    document.getElementById('finalMessage').style.display='block';
    for(let i=0;i<15;i++){
        fireworks.push(new Firework(Math.random()*canvas.width, canvas.height, Math.random()*canvas.height/2));
    }
    alert("You said YES! üíñ");
}

// Tap hearts for mobile
function tapHeart(e){
    startExperience(); // First tap starts music & countdown
    const heart = document.createElement('div');
    heart.classList.add('heart');
    const x = e.clientX || e.touches[0].clientX;
    const y = e.clientY || e.touches[0].clientY;
    heart.style.left = x - 10 + 'px';
    heart.style.top = y - 10 + 'px';
    heart.style.width = '20px';
    heart.style.height = '20px';
    heart.style.backgroundColor = `hsl(${Math.random()*360},70%,60%)`;
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),2000);
}

window.addEventListener('click', tapHeart);
window.addEventListener('touchstart', tapHeart);
window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
</script>

</body>
</html>