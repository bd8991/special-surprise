<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine's Proposal</title>
<style>
body {
    margin: 0;
    padding: 0;
    background: linear-gradient(45deg, #ffcccc, #ff99cc, #ffccff, #ff99cc);
    background-size: 400% 400%;
    animation: gradientShift 15s ease infinite;
    font-family: 'Arial', sans-serif;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    height: 100vh;
    text-align: center;
    position: relative;
    touch-action: none;
}

@keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

#welcomeMessage, #countdown {
    position: absolute;
    top: 30%;
    font-size: 2em;
    color: #ff0066;
    text-shadow: 2px 2px 10px #fff, 0 0 20px #ff99cc;
    opacity: 0;
    animation: fadeIn 2s forwards, pulse 2s infinite;
    z-index: 5;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

h1 {
    color: #ff0066;
    font-size: 3em;
    margin-bottom: 20px;
    cursor: pointer;
    text-shadow: 2px 2px 10px #fff, 0 0 30px #ff3366;
    display: none;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-20px); }
    60% { transform: translateY(-10px); }
}

img {
    width: 300px;
    border-radius: 20px;
    margin-bottom: 20px;
    box-shadow: 0px 0px 30px #ff99cc;
    display: none;
    animation: imageFloat 3s ease-in-out infinite;
}

@keyframes imageFloat {
    0%, 100% { transform: translateY(0px) scale(1); }
    50% { transform: translateY(-15px) scale(1.02); }
}

#proposal {
    display: none;
    font-size: 2em;
    color: #ff0066;
    margin-top: 20px;
    animation: fadeIn 2s forwards, textGlow 2s infinite;
}

@keyframes textGlow {
    0%, 100% { text-shadow: 0 0 10px #ff99cc, 0 0 20px #ff3366; }
    50% { text-shadow: 0 0 20px #ff3366, 0 0 40px #ff0066; }
}

.button-container {
    display: none;
    margin-top: 30px;
    gap: 20px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
}

#yesBtn, #noBtn {
    padding: 15px 30px;
    font-size: 1.8em;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

#yesBtn {
    background-color: #ff3366;
    animation: buttonPulse 1.5s infinite;
}

@keyframes buttonPulse {
    0%, 100% { box-shadow: 0 0 20px #ff3366; }
    50% { box-shadow: 0 0 40px #ff0066, 0 0 60px #ff99cc; }
}

#yesBtn:hover { 
    background-color: #ff6699;
    transform: scale(1.15) rotate(5deg);
    animation: buttonShake 0.5s infinite, buttonPulse 1.5s infinite;
}

@keyframes buttonShake {
    0%, 100% { transform: scale(1.15) rotate(5deg); }
    25% { transform: scale(1.15) rotate(-5deg); }
    75% { transform: scale(1.15) rotate(5deg); }
}

#noBtn {
    background-color: #999;
    position: absolute;
    transition: all 0.2s ease;
}

#noBtn:hover {
    background-color: #777;
}

#finalMessage {
    display: none;
    font-size: 2.5em;
    color: #ff0066;
    margin-top: 20px;
    text-shadow: 2px 2px 10px #fff;
    animation: fadeIn 2s forwards, celebration 1s infinite;
}

@keyframes celebration {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.1) rotate(-5deg); }
    75% { transform: scale(1.1) rotate(5deg); }
}

.puzzle-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.5s forwards;
}

.puzzle-content {
    background: linear-gradient(135deg, #ff99cc, #ffcccc, #ff99cc);
    background-size: 200% 200%;
    animation: gradientMove 3s ease infinite, float 3s ease-in-out infinite;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 0 50px rgba(255, 51, 102, 0.5);
    max-width: 500px;
    width: 90%;
}

@keyframes gradientMove {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.puzzle-title {
    font-size: 2em;
    color: #ff0066;
    margin-bottom: 20px;
    text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);
    animation: titleBounce 1s infinite;
}

@keyframes titleBounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.puzzle-hint {
    font-size: 1.2em;
    color: #ff3366;
    margin: 20px 0;
    line-height: 1.6;
    animation: fadeIn 1s forwards;
}

.puzzle-input {
    width: 100%;
    padding: 15px;
    font-size: 1.3em;
    border: 3px solid #ff3366;
    border-radius: 10px;
    margin: 20px 0;
    text-align: center;
    text-transform: uppercase;
    transition: all 0.3s ease;
}

.puzzle-input:focus {
    border-color: #ff0066;
    box-shadow: 0 0 20px #ff99cc;
    transform: scale(1.05);
}

.puzzle-submit {
    padding: 15px 40px;
    font-size: 1.5em;
    background-color: #ff3366;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    animation: buttonGlow 2s infinite;
}

@keyframes buttonGlow {
    0%, 100% { box-shadow: 0 0 10px #ff3366; }
    50% { box-shadow: 0 0 30px #ff0066; }
}

.puzzle-submit:hover {
    background-color: #ff6699;
    transform: scale(1.1) rotate(2deg);
}

.secret-message {
    display: none;
    font-size: 1.5em;
    color: #fff;
    background: linear-gradient(45deg, #ff0066, #ff3366, #ff0066);
    background-size: 200% 200%;
    animation: messageGradient 3s ease infinite;
    padding: 30px;
    border-radius: 15px;
    margin-top: 20px;
    line-height: 1.8;
}

@keyframes messageGradient {
    0%, 100% { 
        background-position: 0% 50%; 
        box-shadow: 0 0 20px #ff3366, 0 0 40px #ff0066;
    }
    50% { 
        background-position: 100% 50%; 
        box-shadow: 0 0 40px #ff0066, 0 0 60px #ff3366;
    }
}

@keyframes slideIn {
    from { transform: scale(0.5) rotate(-10deg); opacity: 0; }
    to { transform: scale(1) rotate(0deg); opacity: 1; }
}

.wrong-answer {
    color: #ff0066;
    font-size: 1.1em;
    margin-top: 10px;
    display: none;
    animation: shake 0.5s;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

.popup {
    position: fixed;
    background: linear-gradient(135deg, white, #ffe6f0);
    padding: 20px 30px;
    border-radius: 15px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
    z-index: 999;
    animation: popupBounce 0.5s ease, popupFloat 2s ease-in-out infinite;
    font-size: 1.3em;
    color: #ff0066;
    font-weight: bold;
}

@keyframes popupBounce {
    0% { transform: scale(0) rotate(-180deg); }
    50% { transform: scale(1.2) rotate(10deg); }
    100% { transform: scale(1) rotate(0deg); }
}

@keyframes popupFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    background-color: #ff3366;
    animation: confettiFall linear infinite;
    pointer-events: none;
    z-index: 100;
}

@keyframes confettiFall {
    0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
    100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
}

.sparkle {
    position: absolute;
    width: 5px;
    height: 5px;
    background: white;
    border-radius: 50%;
    animation: sparkleAnim 1s ease-out forwards;
    pointer-events: none;
    z-index: 50;
}

@keyframes sparkleAnim {
    0% { transform: scale(0); opacity: 1; }
    50% { transform: scale(1); opacity: 1; }
    100% { transform: scale(0); opacity: 0; }
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.8);}
    to { opacity: 1; transform: scale(1);}
}

.heart {
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: #ff3366;
    transform: rotate(-45deg);
    animation: floatUp linear infinite;
    border-radius: 5px;
    pointer-events: none;
    z-index: 5;
}

.heart::before,
.heart::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: #ff3366;
    border-radius: 50%;
}

.heart::before { top: -10px; left: 0; }
.heart::after { left: 10px; top: 0; }

@keyframes floatUp {
    0% { transform: translateY(0) rotate(-45deg) scale(1); opacity: 1;}
    100% { transform: translateY(-100vh) rotate(-45deg) scale(0.5); opacity: 0;}
}

.emoji-float {
    position: absolute;
    font-size: 2em;
    animation: emojiRise 4s ease-in forwards;
    pointer-events: none;
    z-index: 50;
}

@keyframes emojiRise {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
}

canvas { position: absolute; top: 0; left: 0; z-index: 10; pointer-events: none; }

@media (max-width: 600px) {
    h1 { font-size: 2em; }
    #welcomeMessage, #countdown { font-size: 1.5em; }
    #proposal { font-size: 1.5em; }
    #yesBtn, #noBtn { font-size: 1.5em; padding: 12px 25px; }
    .puzzle-content { padding: 20px; }
    .puzzle-title { font-size: 1.5em; }
}
</style>
</head>
<body>

<div id="welcomeMessage">Hey Sexy ‚ù§Ô∏è, I have a surprise for you‚Ä¶ Tap anywhere!</div>
<div id="countdown"></div>

<h1>Sexy ‚ù§Ô∏è, tap me!</h1>
<img src="https://images.unsplash.com/photo-1605902711622-cfb43c4431e0?auto=format&fit=crop&w=500&q=80" alt="Valentine's Image">
<div id="proposal">Will you be my Valentine? üíñ</div>

<div class="button-container" id="buttonContainer">
    <button id="yesBtn" onclick="showFinal()">Yes! üíï</button>
    <button id="noBtn" onmouseover="moveButton()" ontouchstart="moveButton()">No üò¢</button>
</div>

<div id="finalMessage">I'm yours forever! üíñ</div>

<div class="puzzle-modal" id="puzzleModal">
    <div class="puzzle-content">
        <div class="puzzle-title">üîê One Last Thing... üíï</div>
        <div class="puzzle-hint">
            Solve this riddle to unlock your secret message:<br><br>
            <em>"I have no voice, yet I speak to you.<br>
            I tell of all things in the world that people do.<br>
            I have leaves, but I am not a tree.<br>
            I have a spine, but no bones in me.<br>
            What am I?"</em><br><br>
            üí° Hint: You're holding our story...
        </div>
        <input type="text" id="puzzleInput" class="puzzle-input" placeholder="Type your answer..." maxlength="10">
        <div class="wrong-answer" id="wrongAnswer">‚ùå Not quite! Think about our memories... üí≠</div>
        <button class="puzzle-submit" onclick="checkPuzzle()">Unlock Secret üíñ</button>
        <div class="secret-message" id="secretMessage">
            ‚ú® <strong>SECRET MESSAGE UNLOCKED</strong> ‚ú®<br><br>
            "Every page of our story together is my favorite chapter.<br>
            From the first moment I saw you, I knew you were the one.<br>
            You are my past, my present, and my forever future.<br>
            This isn't just a Valentine's proposal...<br>
            It's a promise to write our story together, one beautiful day at a time.<br><br>
            I love you more than words can say. üìñüíï<br>
            Forever yours,<br>
            Your Valentine üíã"
        </div>
    </div>
</div>

<audio id="loveSong" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3" type="audio/mpeg">
    Your browser does not support audio.
</audio>

<canvas id="fireworks"></canvas>

<script>
const music = document.getElementById('loveSong');
const welcomeMessage = document.getElementById('welcomeMessage');
const countdownEl = document.getElementById('countdown');
const title = document.querySelector('h1');
const img = document.querySelector('img');
const buttonContainer = document.getElementById('buttonContainer');
const noBtn = document.getElementById('noBtn');
const yesBtn = document.getElementById('yesBtn');
const puzzleModal = document.getElementById('puzzleModal');
const puzzleInput = document.getElementById('puzzleInput');
const wrongAnswer = document.getElementById('wrongAnswer');
const secretMessage = document.getElementById('secretMessage');

let started = false;
let noClickCount = 0;

const noPopups = [
    "Wrong choice! üò±",
    "Think again! üí≠",
    "Are you sure about that? ü§î",
    "My heart is breaking! üíî",
    "Please reconsider! ü•∫",
    "Don't do this! üò¢",
    "You're breaking my heart! üíî"
];

function createConfetti() {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * window.innerWidth + 'px';
    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
    confetti.style.animationDuration = 3 + Math.random() * 2 + 's';
    confetti.style.width = 5 + Math.random() * 10 + 'px';
    confetti.style.height = 5 + Math.random() * 10 + 'px';
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 5000);
}

function createSparkle(x, y) {
    for (let i = 0; i < 8; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.style.left = x + 'px';
        sparkle.style.top = y + 'px';
        sparkle.style.animationDelay = i * 0.1 + 's';
        document.body.appendChild(sparkle);
        setTimeout(() => sparkle.remove(), 1000);
    }
}

function createFloatingEmoji() {
    const emojis = ['üíï', 'üíñ', 'üíó', 'üíò', 'üíù', 'üíû', '‚ù§Ô∏è', 'üåπ', '‚ú®', '‚≠ê'];
    const emoji = document.createElement('div');
    emoji.className = 'emoji-float';
    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    emoji.style.left = Math.random() * window.innerWidth + 'px';
    emoji.style.bottom = '0px';
    emoji.style.animationDuration = 3 + Math.random() * 2 + 's';
    document.body.appendChild(emoji);
    setTimeout(() => emoji.remove(), 5000);
}

setInterval(createConfetti, 200);
setInterval(createFloatingEmoji, 800);

function startExperience() {
    if (started) return;
    started = true;

    music.play().catch(() => {});
    welcomeMessage.style.display = 'none';

    let countdown = 3;
    countdownEl.style.display = 'block';
    countdownEl.textContent = countdown;
    const interval = setInterval(() => {
        countdown--;
        if (countdown > 0) {
            countdownEl.textContent = countdown;
        } else {
            clearInterval(interval);
            countdownEl.style.display = 'none';
            title.style.display = 'block';
            img.style.display = 'block';
            document.getElementById('proposal').style.display = 'block';
            buttonContainer.style.display = 'flex';
        }
    }, 1000);
}

function showPopup(message) {
    const popup = document.createElement('div');
    popup.className = 'popup';
    popup.textContent = message;
    popup.style.left = Math.random() * (window.innerWidth - 200) + 'px';
    popup.style.top = Math.random() * (window.innerHeight - 100) + 'px';
    document.body.appendChild(popup);

    setTimeout(() => {
        popup.style.animation = 'fadeOut 0.5s forwards';
        setTimeout(() => popup.remove(), 500);
    }, 2000);
}

function moveButton() {
    noClickCount++;

    const randomPopup = noPopups[Math.floor(Math.random() * noPopups.length)];
    showPopup(randomPopup);

    const newSize = 1.8 + (noClickCount * 0.3);
    yesBtn.style.fontSize = newSize + 'em';

    const maxX = window.innerWidth - 200;
    const maxY = window.innerHeight - 100;
    const randomX = Math.random() * maxX;
    const randomY = Math.random() * maxY;

    noBtn.style.left = randomX + 'px';
    noBtn.style.top = randomY + 'px';

    const messages = [
        "No üò¢",
        "Are you sure? ü•∫",
        "Really? üò≠",
        "Please? üíî",
        "Think again! üò¢",
        "Don't be mean! üòø",
        "Last chance! üíï",
        "I'm begging! üôè",
        "Pretty please? ü•π"
    ];

    if (noClickCount < messages.length) {
        noBtn.textContent = messages[noClickCount];
    } else {
        noBtn.textContent = "Fine... üò≠";
        noBtn.style.fontSize = '0.8em';
    }
}

function checkPuzzle() {
    const answer = puzzleInput.value.trim().toUpperCase();
    if (answer === 'BOOK') {
        wrongAnswer.style.display = 'none';
        puzzleInput.style.display = 'none';
        document.querySelector('.puzzle-submit').style.display = 'none';
        document.querySelector('.puzzle-hint').style.display = 'none';
        secretMessage.style.display = 'block';

        for (let i = 0; i < 100; i++) {
            setTimeout(createConfetti, i * 30);
        }

        for (let i = 0; i < 25; i++) {
            setTimeout(() => {
                fireworks.push(new Firework(Math.random() * canvas.width, canvas.height, Math.random() * canvas.height / 2));
            }, i * 150);
        }
    } else {
        wrongAnswer.style.display = 'block';
        puzzleInput.value = '';
        puzzleInput.style.borderColor = '#ff0066';
        puzzleInput.style.animation = 'shake 0.5s';
        showPopup("Not quite! Keep trying! üí≠");
        setTimeout(() => {
            puzzleInput.style.animation = '';
        }, 500);
    }
}

puzzleInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        checkPuzzle();
    }
});

function createHeart() {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.style.left = Math.random() * window.innerWidth + 'px';
    heart.style.animationDuration = 4 + Math.random() * 3 + 's';
    heart.style.width = 10 + Math.random() * 20 + 'px';
    heart.style.height = heart.style.width;
    heart.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 7000);
}
setInterval(createHeart, 300);

const canvas = document.getElementById('fireworks');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let fireworks = [];
let particles = [];

class Firework {
    constructor(x, y, targetY, color = '') {
        this.x = x;
        this.y = y;
        this.targetY = targetY;
        this.speed = 4 + Math.random() * 2;
        this.color = color || `hsl(${Math.random() * 360}, 100%, 50%)`;
    }
    update() {
        this.y -= this.speed;
        if (this.y <= this.targetY) {
            createHeartParticles(this.x, this.y);
            return false;
        }
        return true;
    }
    draw() {
        ctx.fillStyle = this.color;
        ctx.fillRect(this.x, this.y, 2, 10);
    }
}

class Particle {
    constructor(x, y, color, shape = 'circle') {
        this.x = x;
        this.y = y;
        this.color = color;
        this.speedX = (Math.random() - 0.5) * 6;
        this.speedY = (Math.random() - 0.5) * 6;
        this.alpha = 1;
        this.shape = shape;
    }
    update() {
        this.x += this.speedX;
        this.y += this.speedY;
        this.alpha -= 0.02;
        return this.alpha > 0;
    }
    draw() {
        ctx.globalAlpha = this.alpha;
        ctx.fillStyle = this.color;
        if (this.shape === 'heart') {
            drawHeart(this.x, this.y, 5, this.color);
        } else {
            ctx.fillRect(this.x, this.y, 3, 3);
        }
        ctx.globalAlpha = 1;
    }
}

function drawHeart(x, y, size, color) {
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(-Math.PI / 4);
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.fillRect(0, 0, size, size);
    ctx.fillRect(-size, 0, size, size);
    ctx.arc(-size / 2, -size / 2, size / 2, 0, Math.PI * 2);
    ctx.arc(size / 2, -size / 2, size / 2, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
}

function createHeartParticles(x, y) {
    for (let i = 0; i < 30; i++) {
        let color = `hsl(${Math.random() * 360}, 100%, 70%)`;
        particles.push(new Particle(x, y, color, 'heart'));
    }
    for (let i = 0; i < 50; i++) {
        let color = `hsl(${Math.random() * 360}, 100%, 70%)`;
        particles.push(new Particle(x, y, color, 'circle'));
    }
}

function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    fireworks = fireworks.filter(f => f.update());
    fireworks.forEach(f => f.draw());
    particles = particles.filter(p => p.update());
    particles.forEach(p => p.draw());
    requestAnimationFrame(animate);
}
animate();

function showFinal() {
    buttonContainer.style.display = 'none';
    document.getElementById('finalMessage').style.display = 'block';
    document.getElementById('proposal').style.display = 'none';

    for (let i = 0; i < 200; i++) {
        setTimeout(createConfetti, i * 20);
    }

    for (let i = 0; i < 15; i++) {
        setTimeout(() => {
            fireworks.push(new Firework(Math.random() * canvas.width, canvas.height, Math.random() * canvas.height / 2));
        }, i * 200);
    }

    setTimeout(() => {
        puzzleModal.style.display = 'flex';
    }, 2000);
}

function tapHeart(e) {
    startExperience();
    const heart = document.createElement('div');
    heart.classList.add('heart');
    const x = e.clientX || e.touches[0].clientX;
    const y = e.clientY || e.touches[0].clientY;
    
    createSparkle(x, y);
    
    heart.style.left = x - 10 + 'px';
    heart.style.top = y - 10 + 'px';
    heart.style.width = '20px';
    heart.style.height = '20px';
    heart.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
}

window.addEventListener('click', tapHeart);
window.addEventListener('touchstart', tapHeart);
window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
</script>

</body>
</html>
